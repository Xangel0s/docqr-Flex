"use strict";(self.webpackChunkdocqr_frontend=self.webpackChunkdocqr_frontend||[]).push([[670],{8670:(x,g,i)=>{i.r(g),i.d(g,{LoginComponent:()=>I});var c=i(177),n=i(4341),e=i(4438),f=i(8010),p=i(4978),h=i(5567);function _(r,l){1&r&&(e.j41(0,"div",19),e.EFF(1," El usuario es requerido "),e.k0s())}function v(r,l){1&r&&(e.j41(0,"div",19),e.EFF(1," La contrase\xf1a es requerida "),e.k0s())}function b(r,l){if(1&r&&(e.j41(0,"div",20)(1,"p",21),e.EFF(2),e.k0s()()),2&r){const t=e.XpG();e.R7$(2),e.JRh(t.errorMessage)}}function F(r,l){1&r&&(e.j41(0,"span",22),e.EFF(1,"sync"),e.k0s())}function E(r,l){1&r&&(e.j41(0,"span"),e.EFF(1,"Iniciar Sesi\xf3n"),e.k0s())}function y(r,l){1&r&&(e.j41(0,"span"),e.EFF(1,"Iniciando sesi\xf3n..."),e.k0s())}let I=(()=>{class r{fb;authService;router;notificationService;loginForm;loading=!1;errorMessage="";constructor(t,s,o,a){this.fb=t,this.authService=s,this.router=o,this.notificationService=a,this.loginForm=this.fb.group({username:["",[n.k0.required]],password:["",[n.k0.required]]})}ngOnInit(){this.authService.isAuthenticated()&&this.router.navigate(["/"])}onSubmit(){if(this.loginForm.invalid)return void this.markFormGroupTouched(this.loginForm);this.loading=!0,this.errorMessage="";const{username:t,password:s}=this.loginForm.value;this.authService.login(t,s).subscribe({next:o=>{o.success?(this.notificationService.showSuccess("Bienvenido a Geofal"),this.router.navigate(["/"])):(this.errorMessage=o.message||"Error al iniciar sesi\xf3n",this.loading=!1)},error:o=>{console.error("Error en login:",o),this.errorMessage=o?.error?.message||"Usuario o contrase\xf1a incorrectos",this.loading=!1,this.notificationService.showError(this.errorMessage)}})}markFormGroupTouched(t){Object.keys(t.controls).forEach(s=>{t.get(s)?.markAsTouched()})}static \u0275fac=function(s){return new(s||r)(e.rXU(n.ok),e.rXU(f.u),e.rXU(p.Ix),e.rXU(h.J))};static \u0275cmp=e.VBU({type:r,selectors:[["app-login"]],standalone:!0,features:[e.aNF],decls:29,vars:12,consts:[[1,"min-h-screen","bg-gradient-to-br","from-gray-50","to-gray-100","flex","items-center","justify-center","px-4","py-12"],[1,"max-w-md","w-full"],[1,"text-center","mb-8"],[1,"flex","justify-center","mb-6"],["src","assets/images/geofal.png","alt","Geofal Logo","onerror","this.src='assets/images/geofal-logo-placeholder.svg'",1,"h-24","w-auto","object-contain"],[1,"text-3xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],[1,"bg-white","rounded-xl","shadow-lg","p-8"],[1,"space-y-6",3,"ngSubmit","formGroup"],["for","username",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","username","type","text","formControlName","username","placeholder","Ingresa tu usuario",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-primary","focus:border-transparent","transition-all"],["class","mt-1 text-sm text-red-600",4,"ngIf"],["for","password",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","password","type","password","formControlName","password","placeholder","Ingresa tu contrase\xf1a",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-primary","focus:border-transparent","transition-all"],["class","bg-red-50 border border-red-200 rounded-lg p-4",4,"ngIf"],["type","submit",1,"w-full","bg-primary","text-white","py-3","px-4","rounded-lg","font-medium","hover:bg-primary/90","focus:outline-none","focus:ring-2","focus:ring-primary","focus:ring-offset-2","transition-all","disabled:opacity-50","disabled:cursor-not-allowed","flex","items-center","justify-center","gap-2",3,"disabled"],["class","material-symbols-outlined animate-spin",4,"ngIf"],[4,"ngIf"],[1,"mt-6","text-center","text-sm","text-gray-600"],[1,"mt-1","text-sm","text-red-600"],[1,"bg-red-50","border","border-red-200","rounded-lg","p-4"],[1,"text-sm","text-red-800"],[1,"material-symbols-outlined","animate-spin"]],template:function(s,o){if(1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e.nrm(4,"img",4),e.k0s(),e.j41(5,"h1",5),e.EFF(6,"Sistema de Documentos QR"),e.k0s(),e.j41(7,"p",6),e.EFF(8,"Inicia sesi\xf3n para continuar"),e.k0s()(),e.j41(9,"div",7)(10,"form",8),e.bIt("ngSubmit",function(){return o.onSubmit()}),e.j41(11,"div")(12,"label",9),e.EFF(13," Usuario "),e.k0s(),e.nrm(14,"input",10),e.DNE(15,_,2,0,"div",11),e.k0s(),e.j41(16,"div")(17,"label",12),e.EFF(18," Contrase\xf1a "),e.k0s(),e.nrm(19,"input",13),e.DNE(20,v,2,0,"div",11),e.k0s(),e.DNE(21,b,3,1,"div",14),e.j41(22,"button",15),e.DNE(23,F,2,0,"span",16)(24,E,2,0,"span",17)(25,y,2,0,"span",17),e.k0s()()(),e.j41(26,"div",18)(27,"p"),e.EFF(28,"\xa9 2025 Geofal S.A.C. Todos los derechos reservados."),e.k0s()()()()),2&s){let a,u,d,m;e.R7$(10),e.Y8G("formGroup",o.loginForm),e.R7$(4),e.AVh("border-red-500",(null==(a=o.loginForm.get("username"))?null:a.invalid)&&(null==(a=o.loginForm.get("username"))?null:a.touched)),e.R7$(),e.Y8G("ngIf",(null==(u=o.loginForm.get("username"))?null:u.invalid)&&(null==(u=o.loginForm.get("username"))?null:u.touched)),e.R7$(4),e.AVh("border-red-500",(null==(d=o.loginForm.get("password"))?null:d.invalid)&&(null==(d=o.loginForm.get("password"))?null:d.touched)),e.R7$(),e.Y8G("ngIf",(null==(m=o.loginForm.get("password"))?null:m.invalid)&&(null==(m=o.loginForm.get("password"))?null:m.touched)),e.R7$(),e.Y8G("ngIf",o.errorMessage),e.R7$(),e.Y8G("disabled",o.loading),e.R7$(),e.Y8G("ngIf",o.loading),e.R7$(),e.Y8G("ngIf",!o.loading),e.R7$(),e.Y8G("ngIf",o.loading)}},dependencies:[c.MD,c.bT,n.X1,n.qT,n.me,n.BC,n.cb,n.j4,n.JD]})}return r})()}}]);