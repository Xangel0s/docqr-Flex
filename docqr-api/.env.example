# ====================================
# CONFIGURACIÓN DE ENTORNO - PRODUCCIÓN
# DocQR-Flex API
# ====================================
#
# IMPORTANTE:
# 1. Copiar este archivo como .env
# 2. Actualizar todos los valores según el entorno
# 3. NUNCA subir .env al repositorio Git
# 4. Mantener .env fuera de public_html en cPanel
#

# ====================================
# APLICACIÓN
# ====================================

# Nombre de la aplicación
APP_NAME="DocQR-Flex"

# Entorno: local, development, staging, production
APP_ENV=production

# Debug: SIEMPRE false en producción
APP_DEBUG=false

# URL base de la aplicación (con HTTPS en producción)
APP_URL=https://docqr.geofal.com.pe

# Timezone de la aplicación
APP_TIMEZONE="America/Lima"

# Locale
APP_LOCALE=es
APP_FALLBACK_LOCALE=es
APP_FAKER_LOCALE=es_PE

# Clave de encriptación (generar con: php artisan key:generate)
# CRÍTICO: NUNCA usar la misma key entre entornos
APP_KEY=

# ====================================
# BASE DE DATOS
# ====================================

# Driver de base de datos (mysql, pgsql, sqlite, sqlsrv)
DB_CONNECTION=mysql

# Host de la base de datos
# cPanel: generalmente localhost
# Servidor remoto: IP o hostname
DB_HOST=localhost

# Puerto de la base de datos
DB_PORT=3306

# Nombre de la base de datos
# Formato cPanel: usuario_nombredb
DB_DATABASE=usuario_docqr

# Usuario de la base de datos
# IMPORTANTE: Crear usuario con permisos mínimos necesarios
# Solo: SELECT, INSERT, UPDATE, DELETE en tablas necesarias
DB_USERNAME=usuario_docqr_user

# Contraseña de la base de datos
# IMPORTANTE: Usar contraseña fuerte (min 16 caracteres)
DB_PASSWORD=

# Prefijo de tablas (opcional)
DB_PREFIX=

# ====================================
# CACHÉ
# ====================================

# Driver de caché: file, database, redis, memcached, array
# Producción: redis o memcached (mejor rendimiento)
# Básico: database o file
CACHE_DRIVER=database
CACHE_PREFIX=docqr_cache

# ====================================
# SESIONES
# ====================================

# Driver de sesiones: file, cookie, database, redis, memcached
SESSION_DRIVER=database
SESSION_LIFETIME=120
SESSION_ENCRYPT=false
SESSION_PATH=/
SESSION_DOMAIN=
SESSION_SECURE_COOKIE=true
SESSION_HTTP_ONLY=true
SESSION_SAME_SITE=lax

# ====================================
# COLAS (OPCIONAL)
# ====================================

# Driver de colas: sync, database, redis, sqs
# sync: procesar inmediatamente (no requiere worker)
# database: usar base de datos (requiere worker)
QUEUE_CONNECTION=sync

# ====================================
# LOGGING
# ====================================

# Canal de logs: stack, single, daily, slack, stderr
LOG_CHANNEL=daily

# Nivel de log: emergency, alert, critical, error, warning, notice, info, debug
LOG_LEVEL=error

# Días de retención de logs
LOG_DAILY_DAYS=14

# ====================================
# RUTAS Y ALMACENAMIENTO
# ====================================

# Ruta absoluta para subida de archivos
# cPanel: /home/usuario/docqr-api/storage/app/uploads
# IMPORTANTE: Debe estar fuera de public_html
UPLOAD_PATH=/home/usuario/docqr-api/storage/app/uploads

# Ruta absoluta para códigos QR generados
# cPanel: /home/usuario/docqr-api/storage/app/qr
QR_PATH=/home/usuario/docqr-api/storage/app/qr

# URL base para acceso a archivos (debe apuntar a storage/app/public)
STORAGE_URL="${APP_URL}/storage"

# ====================================
# SUBIDA DE ARCHIVOS
# ====================================

# Tamaño máximo de archivo en MB
MAX_FILE_SIZE=10

# Extensiones permitidas (separadas por coma)
ALLOWED_EXTENSIONS=pdf

# MIME types permitidos (separados por coma)
ALLOWED_MIME_TYPES=application/pdf

# ====================================
# CORS (Cross-Origin Resource Sharing)
# ====================================

# Orígenes permitidos (separados por coma)
# IMPORTANTE: Especificar dominios exactos en producción
# NO usar * en producción
ALLOWED_ORIGINS=https://docqr.geofal.com.pe,https://www.docqr.geofal.com.pe

# Métodos HTTP permitidos
ALLOWED_METHODS=GET,POST,PUT,DELETE,PATCH,OPTIONS

# Headers permitidos
ALLOWED_HEADERS=Content-Type,Accept,Authorization,X-Requested-With

# Permitir credenciales
ALLOW_CREDENTIALS=false

# Max age para preflight (segundos)
CORS_MAX_AGE=86400

# ====================================
# SEGURIDAD
# ====================================

# Deshabilitar funciones peligrosas en PHP
# (configurar también en php.ini)
DISABLE_FUNCTIONS=exec,passthru,shell_exec,system,proc_open,popen

# Forzar HTTPS
FORCE_HTTPS=true

# ====================================
# EMAIL (OPCIONAL)
# ====================================

# Driver de email: smtp, sendmail, mailgun, ses, postmark, log
MAIL_MAILER=smtp

# Configuración SMTP
MAIL_HOST=smtp.gmail.com
MAIL_PORT=587
MAIL_USERNAME=
MAIL_PASSWORD=
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS=noreply@docqr.geofal.com.pe
MAIL_FROM_NAME="${APP_NAME}"

# ====================================
# REDIS (OPCIONAL - Mejor rendimiento)
# ====================================

# Configuración de Redis
# Solo necesario si usas redis para caché/sesiones/colas
# REDIS_HOST=127.0.0.1
# REDIS_PASSWORD=
# REDIS_PORT=6379
# REDIS_CLIENT=phpredis
# REDIS_CLUSTER=redis

# ====================================
# SERVICIOS EXTERNOS (OPCIONAL)
# ====================================

# AWS S3 (si usas almacenamiento en la nube)
# AWS_ACCESS_KEY_ID=
# AWS_SECRET_ACCESS_KEY=
# AWS_DEFAULT_REGION=us-east-1
# AWS_BUCKET=
# AWS_USE_PATH_STYLE_ENDPOINT=false

# ====================================
# MONITOREO Y ANALYTICS (OPCIONAL)
# ====================================

# Sentry para tracking de errores
# SENTRY_LARAVEL_DSN=

# Google Analytics
# GA_TRACKING_ID=

# ====================================
# MANTENIMIENTO
# ====================================

# Modo mantenimiento
# Para activar: php artisan down
# Para desactivar: php artisan up
# MAINTENANCE_MODE=false

# ====================================
# CONFIGURACIÓN ESPECÍFICA cPANEL
# ====================================

# Usuario de cPanel
CPANEL_USER=

# Dominio principal
CPANEL_DOMAIN=docqr.geofal.com.pe

# Path del home en cPanel
CPANEL_HOME=/home/usuario

# Path de public_html
CPANEL_PUBLIC=/home/usuario/public_html

# ====================================
# BACKUP (CONFIGURAR EN CRON)
# ====================================

# Ruta para backups
BACKUP_PATH=/home/usuario/backups

# Días de retención de backups
BACKUP_RETENTION_DAYS=30

# Email para notificaciones de backup
BACKUP_NOTIFICATION_EMAIL=admin@geofal.com.pe

# ====================================
# NOTAS IMPORTANTES
# ====================================
#
# SEGURIDAD:
# - Cambiar APP_KEY con: php artisan key:generate
# - Usar contraseñas fuertes (min 16 caracteres)
# - Nunca compartir credenciales
# - Mantener .env fuera de public_html
# - Permisos del archivo .env: 600 (solo lectura para owner)
#
# cPANEL:
# - Crear base de datos desde cPanel > MySQL Databases
# - Crear usuario con permisos mínimos
# - Ajustar rutas según estructura de cPanel
# - Configurar Cron Jobs para tareas programadas
# - Habilitar SSL/TLS desde cPanel > SSL/TLS Status
#
# RENDIMIENTO:
# - Usar redis/memcached en producción
# - Habilitar OPcache en php.ini
# - Configurar CDN para assets estáticos
# - Implementar caching estratégico
#
# COMANDOS ÚTILES:
# - php artisan config:cache (cachear configuración)
# - php artisan route:cache (cachear rutas)
# - php artisan view:cache (cachear vistas)
# - php artisan optimize (optimización general)
# - composer install --no-dev --optimize-autoloader
#
